// digital popping up animation

gsap.registerPlugin(ScrollTrigger);

gsap.from(".anim-from-bottom-home-hero", {
  y: 50,
  opacity: 0,
  duration: 1,
  stagger: 0.1,
  ease: "power3.out",
  scrollTrigger: {
    trigger: ".hero",
    start: "top 50%",
    toggleActions: "play none none none",
  },
});

gsap.from(".anim-from-bottom-clients-hero", {
  y: 50,
  opacity: 0,
  duration: 1,
  stagger: 0.1,
  ease: "power3.out",
  scrollTrigger: {
    trigger: ".clients",
    start: "top 50%",
    toggleActions: "play none none none",
  },
});

gsap.from(".anim-from-bottom-home-accordion", {
  y: 50,
  opacity: 0,
  duration: 1,
  stagger: 0.1,
  ease: "power3.out",
  scrollTrigger: {
    trigger: ".digital",
    start: "top 50%",
    toggleActions: "play none none none",
  },
});

gsap.from(".anim-from-bottom-home-business", {
  y: 50,
  opacity: 0,
  duration: 1,
  stagger: 0.1,
  ease: "power3.out",
  scrollTrigger: {
    trigger: ".business",
    start: "top 50%",
    toggleActions: "play none none none",
  },
});

gsap.from(".anim-from-bottom-home-customers", {
  y: 50,
  opacity: 0,
  duration: 1,
  stagger: 0.1,
  ease: "power3.out",
  scrollTrigger: {
    trigger: ".customers",
    start: "top 50%",
    toggleActions: "play none none none",
  },
});

gsap.from(".anim-from-bottom-home-landscape", {
  y: 50,
  opacity: 0,
  duration: 1,
  stagger: 0.1,
  ease: "power3.out",
  scrollTrigger: {
    trigger: ".landscape",
    start: "top 50%",
    toggleActions: "play none none none",
  },
});

gsap.from(".anim-upscale-home-landscape-app", {
  y: 50,
  opacity: 0,
  scale: 0.8,
  duration: 1,
  stagger: 0.1,
  ease: "power3.out",
  scrollTrigger: {
    trigger: ".landscape",
    start: "top 50%",
    toggleActions: "play none none none",
  },
});

gsap.from(".anim-from-bottom-home-footer-top", {
  y: 50,
  opacity: 0,
  duration: 1,
  stagger: 0.1,
  ease: "power3.out",
  scrollTrigger: {
    trigger: ".footer-top",
    start: "top 50%",
    toggleActions: "play none none none",
  },
});

gsap.from(".anim-from-bottom-service-growth", {
  y: 50,
  opacity: 0,
  duration: 1,
  stagger: 0.1,
  ease: "power3.out",
  scrollTrigger: {
    trigger: ".growth",
    start: "top 50%",
    toggleActions: "play none none none",
  },
});

gsap.from(".anim-upscale-service-growth-app", {
  y: 50,
  opacity: 0,
  scale: 0.8,
  duration: 1,
  stagger: 0.1,
  ease: "power3.out",
  scrollTrigger: {
    trigger: ".growth",
    start: "top 50%",
    toggleActions: "play none none none",
  },
});

gsap.from(".anim-from-bottom-service-build", {
  y: 50,
  opacity: 0,
  duration: 1,
  stagger: 0.1,
  ease: "power3.out",
  scrollTrigger: {
    trigger: ".build",
    start: "top 50%",
    toggleActions: "play none none none",
  },
});

gsap.from(".anim-from-bottom-service-purpose", {
  y: 50,
  opacity: 0,
  duration: 1,
  stagger: 0.1,
  ease: "power3.out",
  scrollTrigger: {
    trigger: ".purpose",
    start: "top 50%",
    toggleActions: "play none none none",
  },
});

gsap.from(".anim-from-bottom-service-ai", {
  y: 50,
  opacity: 0,
  duration: 1,
  stagger: 0.1,
  ease: "power3.out",
  scrollTrigger: {
    trigger: ".ai",
    start: "top 50%",
    toggleActions: "play none none none",
  },
});

gsap.from(".anim-from-bottom-marketing-hero", {
  y: 50,
  opacity: 0,
  duration: 1,
  stagger: 0.1,
  ease: "power3.out",
  scrollTrigger: {
    trigger: ".marketing",
    start: "top 50%",
    toggleActions: "play none none none",
  },
});

gsap.from(".anim-from-bottom-marketing-questions", {
  y: 50,
  opacity: 0,
  duration: 1,
  stagger: 0.1,
  ease: "power3.out",
  scrollTrigger: {
    trigger: ".questions",
    start: "top 50%",
    toggleActions: "play none none none",
  },
});

gsap.from(".anim-from-bottom-hubspot-power", {
  y: 50,
  opacity: 0,
  duration: 1,
  stagger: 0.1,
  ease: "power3.out",
  scrollTrigger: {
    trigger: ".hubspot",
    start: "top 50%",
    toggleActions: "play none none none",
  },
});

gsap.from(".anim-from-bottom-thankyou", {
  y: 50,
  opacity: 0,
  duration: 1,
  stagger: 0.1,
  ease: "power3.out",
  scrollTrigger: {
    trigger: ".thankyou",
    start: "top 50%",
    toggleActions: "play none none none",
  },
});

gsap.from(".anim-from-bottom-policy", {
  y: 50,
  opacity: 0,
  duration: 1,
  stagger: 0.1,
  ease: "power3.out",
  scrollTrigger: {
    trigger: ".policy",
    start: "top 50%",
    toggleActions: "play none none none",
  },
});

gsap.from(".anim-from-bottom-notfound", {
  y: 50,
  opacity: 0,
  duration: 1,
  stagger: 0.1,
  ease: "power3.out",
  scrollTrigger: {
    trigger: ".notfound",
    start: "top 50%",
    toggleActions: "play none none none",
  },
});

gsap.from(".anim-from-bottom-contact", {
  y: 50,
  opacity: 0,
  duration: 1,
  stagger: 0.1,
  ease: "power3.out",
  scrollTrigger: {
    trigger: ".contact",
    start: "top 50%",
    toggleActions: "play none none none",
  },
});

// split-text

const heroTitleSplit = new SplitType(".hero__title-row", { types: "lines" });

// console.log(heroTitleSplit.chars)

gsap.from(heroTitleSplit.lines, {
  y: 100,
  opacity: 1,
  stagger: 0.4,
  duration: 0.7,
});

// scroll down text animation

document.addEventListener("DOMContentLoaded", function () {
  if (window.innerWidth > 768) {
    gsap.to(".sidebar_scroll", {
      y: -60, // Move up by -60px
      duration: 1.2, // Duration of the animation
      yoyo: true, // Make the animation reverse
      repeat: -1, // Repeat indefinitely
      ease: "power1.inOut", // Easing function
    });
  }
});

// burger menu

const burgerMenuButton = document.querySelector(".header__burger-menu-btn");
const burgerMenu = document.querySelector(".burger-menu");
const burgerMenuLinks = document.querySelectorAll(".burger-menu__link");

burgerMenuButton.addEventListener("click", function (e) {
  e.preventDefault();
  const closeBtn = document.querySelector(".close-btn");
  gsap.to(burgerMenu, {
    right: 0,
    duration: 0.1,
    onStart: function () {
      document.body.style.overflow = "hidden";
    },
  });
  closeBtn.addEventListener("click", function (e) {
    e.preventDefault();
    gsap.to(burgerMenu, {
      right: "-70vw",
      duration: 0.1,
      onStart: function () {
        document.body.style.overflow = "hidden";
      },
    });
  });
});

// Close the menu when clicking outside of it
document.addEventListener("click", function (e) {
  if (!burgerMenu.contains(e.target) && !burgerMenuButton.contains(e.target)) {
    gsap.to(burgerMenu, {
      right: "-70vw",
      duration: 0.1,
      onComplete: function () {
        document.body.style.overflow = "visible";
      },
    });
  }
});

// Close the menu when any link inside the burger menu is clicked
burgerMenuLinks.forEach((link) => {
  link.addEventListener("click", function () {
    gsap.to(burgerMenu, {
      right: "-70vw",
      duration: 0.1,
      onComplete: function () {
        document.body.style.overflow = "visible";
      },
    });
  });
});

// business value animation

const statsText = document.querySelectorAll(".card-business__stats-text-main");

statsText.forEach((text) => {
  const splitText = new SplitType(text, { types: "chars" });

  splitText.chars.forEach((char, index) => {
    if (char.textContent.trim() !== "") {
      const finalValue = parseInt(char.textContent, 10);
      if (!isNaN(finalValue)) {
        if (index % 2 === 0) {
          const obj = { value: 0 };
          gsap.fromTo(
            obj,
            { value: 0, delay: 0.1 },
            {
              value: finalValue,
              duration: 3,
              ease: "power3.out",
              onUpdate: function () {
                char.textContent = Math.round(obj.value);
              },
              scrollTrigger: {
                trigger: ".business",
              },
              delay: 0.1,
            }
          );
        }
        gsap.fromTo(
          char,
          {
            y: index % 2 === 0 ? -50 : 50,
            opacity: 0,
            delay: 0.1,
          },
          {
            y: 0,
            opacity: 1,
            duration: 1,
            ease: "power3.out",
            stagger: 0.1,
            scrollTrigger: {
              trigger: ".card-business__stats-text-main",
            },
            delay: 0.1,
          }
        );
      }
    }
  });
});

// follow cursor animation

const mouseFollowImages = document.querySelectorAll(".mouse-follow");

if (window.innerWidth > 992) {
  mouseFollowImages.forEach((item) => {
    document.addEventListener("mousemove", function (e) {
      const { clientX: mouseX, clientY: mouseY } = e;
      const { innerWidth: windowWidth, innerHeight: windowHeight } = window;

      const moveX = (mouseX / windowWidth - 0.5) * 20; // Adjust the multiplier for more or less movement
      const moveY = (mouseY / windowHeight - 0.5) * 20; // Adjust the multiplier for more or less movement

      item.style.transform = `translate(${moveX}px, ${moveY}px)`;
    });
  });
}

// robot top from bottom

const robot = document.getElementById("thankyou-robot");

gsap.to(robot, {
  y: -50,
  duration: 1.5,
  yoyo: true,
  repeat: -1,
  ease: "power1.inOut",
});


// button icon animation hubspot power


const btn = document.querySelector(".power__img-top-layer");
const btnIcon = document.querySelector(".power__img-top-layer-btn-icon");

btn.addEventListener("mouseenter", function () {
  gsap
    .timeline()
    .to(btnIcon, {
      x: "50px",
      opacity: 0,
      duration: 0.05,
      ease: "power1.inOut",
    })
    .set(btnIcon, { x: "-100px", delay: 0.2 })
    .to(btnIcon, {
      x: "0",
      opacity: 1,
      duration: 0.05,
      delay: 0.1,
      ease: "power1.inOut",
    });
});

